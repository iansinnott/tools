#!/bin/bash
host=192.168.0.50
session=0
# this is a mapping of 
#
#   /usr/include/X11/keysymdef.h and
#   http://man.openbsd.org/OpenBSD-current/man1/tmux.1#KEY_BINDINGS
#

if [[ $1 == 'd' ]]; then
  tmp=$(mktemp)
  ssh $host "~/bin/mpv-details" > $tmp
  xmessage -timeout 14 -file $tmp
  rm $tmp
  exit
fi

declare -A mapping=( [return]='ENTER' [space]=' ' [comma]='<' [period]='>' )
[ ${mapping[$1]+_} ] && control=${mapping[$1]} || control=$1

# debugging
# echo $(date) "$1->($control)" >> /tmp/keycode
#

ssh $host 'tmux send-keys -t '$session' "'$control'"'
